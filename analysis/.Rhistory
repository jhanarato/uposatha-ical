group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
special <- events %>%
filter(summary_text %notin% c("Waxing Moon", "Waning Moon"))
special <- events %>%
filter(summary_text %!in% c("Waxing Moon", "Waning Moon"))
special <- events %>%
filter(!(summary_text %!in% c("Waxing Moon", "Waning Moon"))
special <- events %>%
filter(!(summary_text %in% c("Waxing Moon", "Waning Moon"))
special <- events %>%
filter(!(summary_text %in% c("Waxing Moon", "Waning Moon")))
View(special)
special <- events %>%
filter(str_detect(summary_text, "Moon"))
View(special)
special <- events %>%
filter(str_detect(summary_text, "Moon"))
special %>% count(summary_text)
special <- events %>%
anti_join(ordinary, by = "summary_text")
ordinary <- events %>%
filter(str_detect(summary_text, "Moon"))
ordinary %>% count(summary_text)
special <- events %>%
anti_join(ordinary, by = "summary_text")
View(special)
special <- events %>%
anti_join(ordinary, by = "summary_text")
special %>% count(summary_text)
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
multi_events <- events %>%
semi_join(multiple_summaries, by = "date")
multi_events %>%
mutate(date = stamp(date, "1 Jan 2022")) %>%
select(date, summary_text) %>%
head(30) %>%
knitr::kable(col.names = c("Date", "Summary Text"))
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
multi_events <- events %>%
semi_join(multiple_summaries, by = "date")
multi_events %>%
mutate(date = stamp(date, "1 Jan 2022")(date)) %>%
select(date, summary_text) %>%
head(30) %>%
knitr::kable(col.names = c("Date", "Summary Text"))
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
multi_events <- events %>%
semi_join(multiple_summaries, by = "date")
multi_events %>%
mutate(date = stamp("1 Jan 2022")(date)) %>%
select(date, summary_text) %>%
head(30) %>%
knitr::kable(col.names = c("Date", "Summary Text"))
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
multi_events <- events %>%
semi_join(multiple_summaries, by = "date")
multi_events %>%
mutate(date = stamp("1 Jan 2022", quiet = TRUE)(date)) %>%
select(date, summary_text) %>%
head(30) %>%
knitr::kable(col.names = c("Date", "Summary Text"))
special <- events %>%
anti_join(ordinary, by = "summary_text") %>%
filter(!(str_detect(summary_text, "Vassa")))
special %>% count(summary_text)
events %>% semi_join(special, by = "date")
concurent_with_special <- events %>% semi_join(special, by = "date")
View(concurent_with_special)
concurent_with_special <- events %>% semi_join(special, by = "date")
concurent_with_special %>% count(summary_text)
concurent_with_special <- events %>%
semi_join(special, by = "date") %>%
filter(!str_detect(summary_text, "Vassa"))
concurent_with_special %>% count(summary_text)
vassa_days <- events %>% filter(str_detect(summary_text, "Vassa"))
View(vassa_days)
View(vassa_days)
vassa_days <- events %>% filter(str_detect(summary_text, "Vassa"))
same_day_as_vassa_days <- events %>% semi_join(vassa_days, by = "date")
View(same_day_as_vassa_days)
vassa_days <- events %>% filter(str_detect(summary_text, "Vassa"))
same_day_as_vassa_days <- events %>% semi_join(vassa_days, by = "date")
same_day_as_vassa_days %>% count(date)
vassa_days <- events %>% filter(str_detect(summary_text, "Vassa"))
same_day_as_vassa_days <- events %>% semi_join(vassa_days, by = "date")
same_day_as_vassa_days %>% count(summary_text)
first_day_of_vassa <- events %>% filter(summary_text == "First day of Vassa")
View(first_day_of_vassa)
first_day_of_vassa <- events %>% filter(summary_text == "First day of Vassa")
same_as_first_day_of_vassa <- events %>% semi_join(first_day_of_vassa, by = "date")
View(same_day_as_vassa_days)
View(same_day_as_vassa_days)
View(same_as_first_day_of_vassa)
first_day_of_vassa <- events %>% filter(summary_text == "First day of Vassa")
same_as_first_day_of_vassa <- events %>% semi_join(first_day_of_vassa, by = "date")
same_as_first_day_of_vassa %>% count(summary_text)
View(events)
library(tidyverse)
library(lubridate)
events <- read_csv("events.csv", col_names = c("summary_text", "date"))
events %>% head(10)
date_range <- events %>%
summarise(
start = min(date),
end = max(date)
)
events %>% count(summary_text, sort = TRUE)
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
multi_events <- events %>%
semi_join(multiple_summaries, by = "date")
multi_events %>%
mutate(date = stamp("1 Jan 2022", quiet = TRUE)(date)) %>%
select(date, summary_text) %>%
head(30) %>%
knitr::kable(col.names = c("Date", "Summary Text"))
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n == 3)
three_summary_events <- events %>%
semi_join(multiple_summaries, by = "date")
three_summary_events %>%
mutate(date = format(date, "%d %h %Y")) %>%
select(date, summary_text) %>%
knitr::kable(col.names = c("Date", "Summary Text"))
waning_waxing <- events %>%
filter(summary_text %in% c("Waxing Moon", "Waning Moon"))
events %>%
semi_join(waning_waxing, by = "date") %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
ordinary <- events %>%
filter(str_detect(summary_text, "Moon"))
ordinary %>% count(summary_text)
special <- events %>%
anti_join(ordinary, by = "summary_text") %>%
filter(!(str_detect(summary_text, "Vassa")))
special %>% count(summary_text)
concurent_with_special <- events %>%
semi_join(special, by = "date") %>%
filter(!str_detect(summary_text, "Vassa"))
concurent_with_special %>% count(summary_text)
vassa_days <- events %>% filter(str_detect(summary_text, "Vassa"))
same_day_as_vassa_days <- events %>% semi_join(vassa_days, by = "date")
same_day_as_vassa_days %>% count(summary_text)
first_day_of_vassa <- events %>% filter(summary_text == "First day of Vassa")
same_as_first_day_of_vassa <- events %>% semi_join(first_day_of_vassa, by = "date")
same_as_first_day_of_vassa %>% count(summary_text)
date_range <- events %>%
summarise(
start = min(date),
end = max(date)
)
library(tidyverse)
library(lubridate)
events <- read_csv("events.csv", col_names = c("summary_text", "date"))
events %>% head(10)
date_range <- events %>%
summarise(
start = min(date),
end = max(date)
)
events %>% count(summary_text, sort = TRUE)
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
multi_events <- events %>%
semi_join(multiple_summaries, by = "date")
multi_events %>%
mutate(date = stamp("1 Jan 2022", quiet = TRUE)(date)) %>%
select(date, summary_text) %>%
head(30) %>%
knitr::kable(col.names = c("Date", "Summary Text"))
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
multi_events <- events %>%
semi_join(multiple_summaries, by = "date")
multi_events %>%
mutate(date = stamp("1 Jan 2022", quiet = TRUE)(date)) %>%
select(date, summary_text) %>%
head(15 %>%
knitr::kable(col.names = c("Date", "Summary Text"))
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
multi_events <- events %>%
semi_join(multiple_summaries, by = "date")
multi_events %>%
mutate(date = stamp("1 Jan 2022", quiet = TRUE)(date)) %>%
select(date, summary_text) %>%
head(15) %>%
knitr::kable(col.names = c("Date", "Summary Text"))
multiple_summaries <- events %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n == 3)
three_summary_events <- events %>%
semi_join(multiple_summaries, by = "date")
three_summary_events %>%
mutate(date = format(date, "%d %h %Y")) %>%
select(date, summary_text) %>%
knitr::kable(col.names = c("Date", "Summary Text"))
waning_waxing <- events %>%
filter(summary_text %in% c("Waxing Moon", "Waning Moon"))
events %>%
semi_join(waning_waxing, by = "date") %>%
group_by(date) %>%
summarise(
n = n()
) %>%
filter(n > 1)
ordinary <- events %>%
filter(str_detect(summary_text, "Moon"))
ordinary %>% count(summary_text)
concurent_with_special <- events %>%
semi_join(special, by = "date") %>%
filter(!str_detect(summary_text, "Vassa"))
concurent_with_special %>% count(summary_text)
vassa_days <- events %>% filter(str_detect(summary_text, "Vassa"))
same_day_as_vassa_days <- events %>% semi_join(vassa_days, by = "date")
same_day_as_vassa_days %>% count(summary_text)
first_day_of_vassa <- events %>% filter(summary_text == "First day of Vassa")
same_as_first_day_of_vassa <- events %>% semi_join(first_day_of_vassa, by = "date")
same_as_first_day_of_vassa %>% count(summary_text)
?nrow
events %>%
filter(lead(date) < date)
events %>%
filter(lead(date) >= date)
events %>% count()
events %>%
filter(lead(date) < date)
events %>% filter(is.na(lead(date)))
events %>%
mutate(
next_out_of_sequence = (lead(date) < date)
)
events %>%
mutate(
next_out_of_sequence = (lead(date) < date)
) %>%
count(next_out_of_sequence)
sequential <- events %>%
mutate(
out_of_sequence = (lead(date) < date)
)
library(tidyverse)
library(lubridate)
sequential <- events %>%
mutate(
out_of_sequence = (lead(date) < date)
)
events <- read_csv("events.csv",
col_names = c("summary_text", "date")) %>%
select(date, summary_text)
sequential <- events %>%
mutate(
out_of_sequence = (lead(date) < date)
)
sequential %>% filter(out_of_sequence)
sequential <- events %>%
mutate(
out_of_sequence = (lead(date) < date)
)
sequential %>% filter(out_of_sequence)
sequential <- events %>%
mutate(
out_of_sequence = (lead(date) < date)
)
sequential %>% filter(out_of_sequence)
View(events)
View(sequential)
sequential <- events %>%
mutate(
is_in_sequence = (lag(date) <= date)
)
sequential %>% filter(!is_in_sequence)
View(sequential)
sequential <- events %>%
mutate(
is_in_sequence = (lag(date) <= date)
)
sequential %>% filter(!is_in_sequence)
sequential %>% filter(is.na(is_in_sequence))
sequential <- events %>%
mutate(
is_in_sequence = (lag(date) <= date | is.na(lag(date)))
)
sequential %>% filter(!is_in_sequence)
sequential <- events %>%
mutate(
is_in_sequence = (lag(date) <= date)
)
sequential %>% count(is_in_sequence)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
solitary
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
solitary %>% count(summary_text)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
solitary %>% count(summary_text)
solitary
solitary %>% pull(date)
?semi_join
events %>% semi_join(solitary, by = "date")
events %>%
semi_join(solitary, by = "date") %>%
count()
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
solitary %>%
group_by(date) %>%
count()
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
solitary %>%
group_by(date) %>%
nrows()
?nrow
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
solitary %>%
group_by(date) %>%
nrow()
events %>%
anti_join(solitary, by = "date") %>%
count()
events %>%
semi_join(solitary, by = "date") %>%
count(summary_text)
events %>%
anti_join(solitary, by = "date") %>%
count(summary_text)
events %>%
semi_join(solitary, by = "date") %>%
count(summary_text, sort = TRUE)
events %>%
anti_join(solitary, by = "date") %>%
count(summary_text, sort = TRUE)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
events %>%
semi_join(solitary, by = "date") %>%
count(summary_text, sort = TRUE)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
events %>%
semi_join(solitary, by = "date") %>%
count(summary_text, sort = TRUE)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
solitary %>%
group_by(date) %>%
count(summary_text)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
events %>%
semi_join(solitary, by = "date") %>%
count(date)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
events %>%
semi_join(solitary, by = "date") %>%
count(date) %>%
filter(n != 1)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
event_count <- events %>%
semi_join(solitary, by = "date") %>%
count(date)
View(event_count)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
event_count <- events %>%
semi_join(solitary, by = "date") %>%
count(date)
event_count %>% filter(n > 1)
events %>%
mutate(
phase = if_else(str_detect(summary_text, "Full"), "Full", NA ),
phase = if_else(str_detect(summary_text, "New"), "New", NA ),
phase = if_else(str_detect(summary_text, "Waxing"), "Waxing", NA ),
phase = if_else(str_detect(summary_text, "Waning"), "Waning", NA )
)
events %>%
mutate(
phase = if_else(str_detect(summary_text, "Full"), "Full", "None" ),
phase = if_else(str_detect(summary_text, "New"), "New", "None" ),
phase = if_else(str_detect(summary_text, "Waxing"), "Waxing", "None" ),
phase = if_else(str_detect(summary_text, "Waning"), "Waning", "None" )
)
events %>%
mutate(
phase = if_else(str_detect(summary_text, "Full"), "Full", "None" ),
phase = if_else(str_detect(summary_text, "New"), "New",  phase),
phase = if_else(str_detect(summary_text, "Waxing"), "Waxing", phase ),
phase = if_else(str_detect(summary_text, "Waning"), "Waning", phase )
)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
event_count <- events %>%
semi_join(solitary, by = "date") %>%
count(date)
event_count %>%
mutate(
one = n == 1,
two = n == 2,
three = n == 3
)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
event_count <- events %>%
semi_join(solitary, by = "date") %>%
count(date)
View(event_count)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
event_count <- events %>%
semi_join(solitary, by = "date") %>%
count(date)
event_count %>% group_by(n) %>% count()
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
event_count <- events %>%
semi_join(solitary, by = "date") %>%
count(date)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
event_count <- events %>%
semi_join(solitary, by = "date") %>%
count(date)
event_count %>% max(n)
View(event_count)
solitary <- events %>%
filter(summary_text %in% c("New Moon", "Waning Moon", "Waxing Moon", "First day of Vassa"))
event_count <- events %>%
semi_join(solitary, by = "date") %>%
count(date)
View(event_count)
solitary <- events %>%
filter(summary_text %in% c("New Moon", "Waning Moon", "Waxing Moon", "First day of Vassa"))
event_count <- events %>%
semi_join(solitary, by = "date") %>%
count(date) %>%
filter(n > 1)
View(event_count)
solitary <- events %>%
filter(summary_text %in% c("New Moon", "Waning Moon", "Waxing Moon", "First day of Vassa"))
events %>%
semi_join(solitary, by = "date") %>%
count(date) %>%
filter(n > 1)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
events %>%
semi_join(solitary, by = "date") %>%
count(date) %>%
filter(n > 1)
solitary <- events %>%
filter(summary_text %in% c("Waning Moon", "Waxing Moon", "First day of Vassa"))
events %>%
semi_join(solitary, by = "date") %>%
count(date) %>%
filter(n > 1)
